> Hibernate

      Hibernate 是一个开放源代码的对象关系映射框架，它对JDBC进行了非常轻量级的对象封装，使得Java程序员可以随心所欲的使用对象编程思维来操纵数据库。
      
      Hibernate可以应用在任何使用JDBC的场合，既可以在Java的客户端程序使用，也可以在Servlet/JSP的Web应用中使用，
      最具革命意义的是，Hibernate可以在应用EJB的J2EE架构中取代CMP，完成数据持久化的重任。
      
      Eclipse平台下的Hibernate辅助开发工具:【Hibernate Synchronizer】【MiddlegenIDE】

>　MyBatis

      使用MyBatis 提供的ORM机制，对业务逻辑实现人员而言，面对的是纯粹的Java对象， 这一层与通过Hibernate 实现ORM 而言基本一致，
      而对于具体的数据操作，Hibernate 会自动生成SQL 语句，而MyBatis则要求开发者编写具体的SQL 语句。
      
      相对Hibernate等 “全自动”ORM机制而言，MyBatis 以SQL开发的工作量和数据库移植性上的让步，为系统 设计提供了更大的自由空间。
      作为“全自动”ORM 实现的一种有益补充，MyBatis 的出现显 得别具意义。

数据持久化就是将内存中的数据模型转换为存储模型,以及将存储模型转换为内存中的数据模型的统称. 数据模型可以是任何数据结构或对象模型,存储模型可以是关系模型、XML、二进制流等。cmp和Hibernate只是对象模型到关系模型之间转换的不同实现。

只不过对象模型和关系模型应用广泛，所以就会误认为数据持久化就是对象模型到关系型数据库的转换罢了。Hibernate框架会提供这种机制。对象上数据的修改，Hibernate框架会把这种修改同步到数据库中。数据持久化好处

> 使用数据持久化有以下好处：

      1、程序代码重用性强，即使更换数据库，只需要更改配置文件，不必重写程序代码。
      2、业务逻辑代码可读性强，在代码中不会有大量的SQL语言，提高程序的可读性。
      3、持久化技术可以自动优化，以减少对数据库的访问量，提高程序运行效率。
      数据持久化对象的基本操作有：保存、更新、删除、查询等。
      
> Hibernate框架中数据持久化机制：

      在业务程序与数据库之间，Hibernate框架使用Session会话，来完成数据的提交、更新、删除、查询等等。
      1、向数据库提交数据
      在程序中保存对象时，会把数据保存到Session会话中，然后根据框架的配置文件，自动或手动决定什么时候把这种保存提交到数据库。
      2、从数据库中查询数据
      在查询数据之前，需要清理缓存（手动清理，或者通过配置文件框架自动清理）清理缓存的目的是为了使Session会话中的数据与数据库中的数据保持一致。
      然后程序只需要查询Session会话中的数据即可。
      总之，数据持久化是解决程序与数据库之间交互访问的问题，使程序不直接访问数据库，而是直接访问Session会话，然后由Session会话与数据库“打交道”。
      只要确保，程序每次访问Session中的数据时，与数据库中的数据保持一致，就不会出现错误。

常用orm
hibernate
Toplink(Oracle公司的)
EJB(2.0X中有CMP;3.0X提出了一套“Java持久化API”---JPA)
IBatis

> 阻抗不匹配阻抗

持久化存储数据所采用的数据模型（无论是文件系统还是数据库管理系统）如果与编写程序（C++、Smalltalk、VisualBasic、Java、C#）时所采用的数据模型有差异，就称为“阻抗不匹配”问题。

“阻抗不匹配”是企业里的严重问题，高达25-33%的开发时间浪费在努力将对象挤压进关系型的持久化，也就是一般说的对象关系映射（ORM）。虽然ORM工具的例子都着力演示其简易，但现实的情况要复杂好几个数量级，于是整个ORM的概念都没法站住脚。即便最优秀的ORM工具也会创建出效率极低的模型，导致严重的性能问题

数据持久层位于领域层和基础架构层之间。由于对象范例和关系范例这两大领域之间存在“阻抗不匹配”，所以把数据持久层单独作为J2EE体系的一个层提出来的原因就是能够在对象－关系数据库之间提供一个成功的企业级映射解决方案，尽最大可能弥补这两种范例之间的差异。

J2EE的三层结构是指表示层（Presentation），业务逻辑层（Business Logic）以及基础架构层（Infrastructure），这样的划分非常经典，但是在实际的项目开发法中，开发者通常对三层结构进行扩展来满足一些项目的具体要求，一个最常用的扩展就是将三层体系扩展为五层体系，即表示层(Presentation)、控制/中介层(Controller/Mediator)、领域层(Domain)、数据持久层(Data Persistence)和数据源层(Data Source)。它其实是在三层架构中增加了两个中间层。控制/中介层位于表示层和领域层之间。

> 三层架构表示层

      位于最外层（最上层），最接近用户。用于显示数据和接收用户输入的数据，为用户提供一种交互式操作的界面。

> 三层架构业务逻辑层

      业务逻辑层在体系架构中的位置很关键，它处于数据访问层与表示层中间，起到了数据交换中承上启下的作用。
      由于层是一种弱耦合结构，层与层之间的依赖是向下的，底层对于上层而言是“无知”的，改变上层的设计对于其调用的底层而言没有任何影响。
      如果在分层设计时，遵循了面向接口设计的思想，那么这种向下的依赖也应该是一种弱依赖关系。
      因而在不改变接口定义的前提下，理想的分层式架构，应该是一个支持可抽取、可替换的“抽屉”式架构。
      正因为如此，业务逻辑层的设计对于一个支持可扩展的架构尤为关键，因为它扮演了两个不同的角色。
      对于数据访问层而言，它是调用者；对于表示层而言，它却是被调用者。
      依赖与被依赖的关系都纠结在业务逻辑层上，如何实现依赖关系的解耦，则是除了实现业务逻辑之外留给设计师的任务。

> 三层架构数据层

      数据访问层：有时候也称为是持久层，其功能主要是负责数据库的访问，可以访问数据库系统、二进制文件、文本文档或是XML文档。
      简单的说法就是实现对数据表的Select，Insert，Update，Delete的操作。
      如果要加入ORM的元素，那么就会包括对象和数据表之间的mapping，以及对象实体的持久化。

三层架构规则

三层结构的程序不是说把项目分成DAL,BLL,WebUI三个模块就叫三层了，下面几个问题在你的项目里面：

      ⒈ UILayer里面只有少量（或者没有）SQL语句或者存储过程调用，并且这些语句保证不会修改数据?
      ⒉ 如果把UILayer拿掉，你的项目还能在Interface/API的层次上提供所有功能吗?
      ⒊ 你的DAL可以移植到其他类似环境的项目吗?
      ⒋ 三个模块，可以分别运行于不同的服务器吗?
      
如果不是所有答案都为YES，那么你的项目还不能算是严格意义上的三层程序. 三层程序有一些需要约定遵守的规则：

      ⒈ 最关键的，UI层只能作为一个外壳，不能包含任何业务逻辑(BizLogic)的处理过程
      ⒉ 设计时应该从BLL出发，而不是UI出发. BLL层在API上应该实现所有BizLogic，以面向对象的方式
      ⒊ 不管数据层是一个简单的SqlHelper也好，还是带有Mapping过的Classes也好，应该在一定的抽象程度上做到系统无关
      ⒋ 不管使用COM+(Enterprise Service），还是Remoting，还是WebService之类的远程对象技术，不管部署的时候是不是真的分别部署到不同的服务器上，
      最起码在设计的时候要做这样的考虑，更远的，还得考虑多台服务器通过负载均衡作集群

所以考虑一个项目是不是应该应用三层/多层设计时，先得考虑下是不是真的需要? 实际上大部分程序就开个WebApplication就足够了，完全没必要作的这么复杂. 而多层结构，是用于解决真正复杂的项目需求的。

三层架构与MVC的区别

      MVC（模型Model-视图View-控制器Controller）是一种架构模式，可以用它来创建在域对象和UI表示层对象之间的区分。
      同样是架构级别的，相同的地方在于他们都有一个表现层，但是他们不同的地方在于其他的两个层。
      在三层架构中没有定义Controller的概念。这是最不同的地方。而MVC也没有把业务的逻辑访问看成两个层，这是采用三层架构或MVC搭建程序最主要的区别。
      当然了。在三层中也提到了Model，但是三层架构中Model的概念与MVC中Model的概念是不一样的，“三层”中典型的Model层是以实体类构成的，
      而MVC里，则是由业务逻辑与访问数据组成的

数据持久层解决方案

数据持久层JDBC

许多开发者用JDBC进行数据库程序的开发。此中方式很多情况下都使用DAO模式，采用SQL进行查询。虽然用此方式可以使应用程序代码与具体的数据库厂商和数据库位置无关，不过JDBC是低级别的数据库访问方式，JDBC并不支持面向对象的数据库表示。JDBC数据库表示完全围绕关系数据库模型。在大型应用程序的DAO中书写这样的代码，维护量是非常大的。
数据持久层EJB

在J2EE的规范中，为EJB定义了两种持久化的解决方案：一种是BMP，另一种是CMP。其中CMP不需要将SQL语句加入到代码中。目前，在采用J2EE的应用中，EJB CMP方式得到了广泛应用。更加引人注意的是，随着EJB规范的发展，CMP也包含了一些高级关系的内容。但是，CMP的使用比较复杂，对很多开发人员来说比较难以掌握。而且，不是在所有的情况下都适合在系统中采用EJB，而且想要非常清楚的了解EJB规范也是非常费时的。在用EJB编码前，先要让专家理解API，然后需要了解每一个容器部署时所要关注的技术。此外，许多情况下商用容器的性能和支持也不是很好。
数据持久层JDO

JDO是一个存储java对象的规范，JDO规范1.0的提出可以使你将精力集中在设计Java对象模型，然后在企业应用软件架构的不同层面中存储传统的Java对象（Plain Old Java Objects，简称POJOs），采用JDOQL语言进行SQL操作。一些公司（包括sun）企图根据JDO规范进行设计并实现JDO产品，然而他们都不能很好的进行实现，并且性能优化上比较差。

https://baike.baidu.com/item/DAO/2900358
